<script src="../layuimini/js/login.js" charset="utf-8"></script>
<div class="layuimini-main">

    <div class="layui-form layuimini-form">
        <label style="color:brown">0、网红基本信息</label><hr/>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">网红ID</label>
                <div class="layui-input-inline">
                    <input type="text" name="celebrityid" id="celebrityid" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">网站链接</label>
                <div class="layui-input-inline">
                    <input type="text" name="website" id="website" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">网站流量</label>
                <div class="layui-input-inline">
                    <input type="text" name="star" id="star" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">域名AS分数</label>
                <div class="layui-input-inline">
                    <input type="text" name="as_score" id="as_score" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">网红姓名</label>
                <div class="layui-input-inline">
                    <input type="text" name="celebrityname" id="celebrityname" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">网红邮箱</label>
                <div class="layui-input-inline">
                    <input type="text" name="email" id="email" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">YouTube<br/>频道</label>
                <div class="layui-input-inline">
                    <input type="text" name="youtube" id="youtube" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">YouTube<br/>粉丝数</label>
                <div class="layui-input-inline">
                    <input type="text" name="youtube_star" id="youtube_star" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">Facebook</label>
                <div class="layui-input-inline">
                    <input type="text" name="facebook" id="facebook" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">Ins</label>
                <div class="layui-input-inline">
                    <input type="text" name="ins" id="ins" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <label style="color:brown">1、待开发信息</label><hr/>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">可合作方式</label>
                <div class="layui-input-inline">
                    <input type="text" name="d_way" id="d_way" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">备注</label>
                <div class="layui-input-inline">
                    <input type="text" name="d_remark" id="d_remark" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">跟进人员</label>
                <div class="layui-input-inline">
                    <input type="text" name="d_principal" id="d_principal" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">录入时间</label>
                <div class="layui-input-inline">
                    <input type="text" name="d_addtime" id="d_addtime" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <label style="color:brown">2、待合作信息</label><hr/>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">待合作方式</label>
                <div class="layui-input-inline">
                    <input type="text" name="c_way" id="c_way" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">备注</label>
                <div class="layui-input-inline">
                    <input type="text" name="c_remark" id="c_remark" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">跟进人员</label>
                <div class="layui-input-inline">
                    <input type="text" name="c_principal" id="c_principal" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">跟进渠道</label>
                <div class="layui-input-inline">
                    <input type="text" name="c_channel" id="c_channel" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">跟进时间</label>
                <div class="layui-input-inline">
                    <input type="text" name="c_addtime" id="c_addtime" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <label style="color:brown">3、寄样中信息</label><hr/>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">送测产品</label>
                <div class="layui-input-inline">
                    <input type="text" name="s_product" id="s_product" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">Country</label>
                <div class="layui-input-inline">
                    <input type="text" name="s_country" id="s_country" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">State</label>
                <div class="layui-input-inline">
                    <input type="text" name="s_state" id="s_state" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">City</label>
                <div class="layui-input-inline">
                    <input type="text" name="s_city" id="s_city" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">Address</label>
                <div class="layui-input-inline">
                    <input type="text" name="s_address" id="s_address" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">Phone</label>
                <div class="layui-input-inline">
                    <input type="text" name="s_phone" id="s_phone" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">Postcode</label>
                <div class="layui-input-inline">
                    <input type="text" name="s_postcode" id="s_postcode" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">单号</label>
                <div class="layui-input-inline">
                    <input type="text" name="s_order" id="s_order" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">寄样日期</label>
                <div class="layui-input-inline">
                    <input type="text" name="s_sample_date" id="s_sample_date" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <label style="color:brown">4、已合作信息</label><hr/>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">已合作方式</label>
                <div class="layui-input-inline">
                    <input type="text" name="p_way" id="p_way" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">备注</label>
                <div class="layui-input-inline">
                    <input type="text" name="p_remark" id="p_remark" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">跟进人员</label>
                <div class="layui-input-inline">
                    <input type="text" name="p_principal" id="p_principal" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">合作产品</label>
                <div class="layui-input-inline">
                    <input type="text" name="p_product" id="p_product" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">产品成本</label>
                <div class="layui-input-inline">
                    <input type="text" name="p_product_cost" id="p_product_cost" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">运输成本</label>
                <div class="layui-input-inline">
                    <input type="text" name="p_transfer_cost" id="p_transfer_cost" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">总成本</label>
                <div class="layui-input-inline">
                    <input type="text" name="p_sum_cost" id="p_sum_cost" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">链接地址</label>
                <div class="layui-input-inline">
                    <input type="text" name="p_url" id="p_url" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">加入联盟</label>
                <div class="layui-input-inline">
                    <input type="text" name="p_join_league" id="p_join_league" value="" readonly="readonly" class="layui-input">
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    layui.use(['form', 'table'], function () {
        var form = layui.form,
            layer = layui.layer,
            table = layui.table
        $ = layui.$;
        var hh = sessionStorage.getItem("celebrity_info");//获取键为allJson的字符串
        var pp = JSON.parse(hh);//将字符串抓换成对象

        $("#celebrityid").attr("value", pp["celebrityid"]);
        $("#website").attr("value", pp["website"]);
        $("#star").attr("value", pp["star"]);
        $("#as_score").attr("value", pp["as_score"]);
        $("#celebrityname").attr("value", pp["celebrityname"]);
        $("#email").attr("value", pp["email"]);
        $("#youtube").attr("value", pp["youtube"]);
        $("#youtube_star").attr("value", pp["youtube_star"]);
        $("#facebook").attr("value", pp["facebook"]);
        $("#ins").attr("value", pp["ins"]);

        $("#d_way").attr("value", pp["d_way"]);
        $("#d_remark").attr("value", pp["d_remark"]);
        $("#d_principal").attr("value", pp["d_principal"]);
        $("#d_addtime").attr("value", pp["d_addtime"]);

        $("#c_way").attr("value", pp["c_way"]);
        $("#c_remark").attr("value", pp["c_remark"]);
        $("#c_principal").attr("value", pp["c_principal"]);
        $("#c_channel").attr("value", pp["c_channel"]);
        $("#c_addtime").attr("value", pp["c_addtime"]);

        $("#s_product").attr("value", pp["s_product"]);
        $("#s_country").attr("value", pp["s_country"]);
        $("#s_state").attr("value", pp["s_state"]);
        $("#s_city").attr("value", pp["s_city"]);
        $("#s_address").attr("value", pp["s_address"]);
        $("#s_phone").attr("value", pp["s_phone"]);
        $("#s_postcode").attr("value", pp["s_postcode"]);
        $("#s_order").attr("value", pp["s_order"]);
        $("#s_sample_date").attr("value", pp["s_sample_date"]);

        $("#p_way").attr("value", pp["p_way"]);
        $("#p_remark").attr("value", pp["p_remark"]);
        $("#p_principal").attr("value", pp["p_principal"]);
        $("#p_product").attr("value", pp["p_product"]);
        $("#p_product").attr("value", pp["p_product"]);
        $("#p_product_cost").attr("value", pp["p_product_cost"]);
        $("#p_transfer_cost").attr("value", pp["p_transfer_cost"]);
        $("#p_sum_cost").attr("value", pp["p_product_cost"] + pp["p_transfer_cost"]);
        $("#p_url").attr("value", pp["p_url"]);
        $("#p_join_league").attr("value", pp["p_join_league"] === 1 ? "加入" : "未加入");
        
        /**
        * 初始化表单，要加上，不然刷新部分组件可能会不加载
         */
        form.render();

        // 当前弹出层，防止ID被覆盖
        var parentIndex = layer.index;

        //监听提交
        form.on('submit(saveBtn)', function (data) {
            data = data.field;
            data["c_id"] = pp["celebrityid"];
            $.ajax({
                url: ipaddress + '/develop/modify/',
                data: data,
                type: 'post',
                dataType: "json",
                success: function (res) {
                    if (res.code == '200') {
                        layer.msg(res.msg, { time: 1000 }, function () {
                            layer.close(parentIndex);
                            var index = layer.load(2);
                            layer.close(index);
                            location.reload();
                        });
                    } else {
                        layer.msg(res.msg, function () {
                            layer.close(parentIndex);
                            var index = layer.load(2);
                            layer.close(index);
                            // window.parent.location.reload();
                        });
                    }
                },
                error: function (res) {
                    layer.msg(res.msg, function () {
                        layer.close(parentIndex);
                        var index = layer.load(2);
                        layer.close(index);
                        // window.parent.location.reload();
                    });
                }
            });
            return false;
        });

    });
</script>